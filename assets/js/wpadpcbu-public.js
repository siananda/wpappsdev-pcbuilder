(()=>{"use strict";var e,t,c,n,o,a,p,u,i,r,d;e=jQuery,c=function(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"hide"==c?e(t).waitMe("hide"):e(t).waitMe({effect:"ios"})},n=function(){var t=[];return e.each(e(".wpadpcbu-filter-panel input[type='checkbox']:checked"),(function(){t.push({tax:e(this).data("tax"),val:e(this).val()})})),t},o=function(){return e("#input-search").val()},a=function(){return e("#input-sort option:selected").val()},p=function(){return e("input.wpadpcbu-price-start").val()},u=function(){return e("input.wpadpcbu-price-end").val()},i=function(t){var n=".wpadpcbu-component-products";e.ajax(wpadpcbu_public.ajaxurl,{method:"post",data:t,beforeSend:function(){c(n)},success:function(t){if(t.success){var o=t.data;e("#wpadpcbu-products-row").html(o.markup),r(o)}else"pcbucomp"==t.data.type&&(window.location.href=wpadpcbu_public.builder),console.log(t);c(n,"hide")}})},r=function(t){var c=t.total_items,n=t.total_pages,o=t.current_page,a=t.per_page;console.log(t),e(".pagination-button").hide(),n>o&&e("#next-btn").show(),o>1&&o<=n&&e("#previous-btn").show(),e("span.total-products").text(c),e("span.total-pages").text(n),e("span.current-page").text(o),e('input[name="total_items"]').val(c),e('input[name="total_pages"]').val(n),e('input[name="per_page"]').val(a),e('input[name="current_page"]').val(o)},d=function(e,c){clearTimeout(t);var p={action:"filter_component_product",pcbucomp:wpadpcbu_public.pcbucomp,taxFilters:n(),searchFilter:o(),sortByFilter:a(),priceStart:e,priceEnd:c,_nonce:wpadpcbu_public.nonce};t=setTimeout((function(){i(p)}),1e3)},jQuery(document).ready((function(e){e(".wpadpcbu-search-product").on("click",(function(e){e.preventDefault();var t=jQuery(this).data("componentid");window.location.assign(wpadpcbu_public.search+"?pcbucomp="+t)})),e(".wpadpcbu-remove-product").on("click",(function(t){t.preventDefault();var n=e(this).data("componentid"),o="#componentid-"+n,a={action:"remove_component_product",componentId:n,_nonce:wpadpcbu_public.nonce};e.ajax(wpadpcbu_public.ajaxurl,{method:"post",data:a,beforeSend:function(){c(o)},success:function(e){e.success?location.reload():console.log(e),c(o,"hide")}})})),e(".wpadpcbu-product-cart").on("click",(function(t){t.preventDefault();var n=".wpadpcbu-component-table table",o={action:"add_components_product_to_cart",_nonce:wpadpcbu_public.nonce};e.ajax(wpadpcbu_public.ajaxurl,{method:"post",data:o,beforeSend:function(){c(n)},success:function(t){t.success?(e(document.body).trigger("wc_fragment_refresh"),window.location.assign(t.data.url)):alert(t.data.message),c(n,"hide")}})})),e(".wpadpcbu-save").on("click",(function(t){t.preventDefault();var n=".wpadpcbu-component-table table",o={action:"pcbuilder_configuration_save",_nonce:wpadpcbu_public.nonce};console.log(o),e.ajax(wpadpcbu_public.ajaxurl,{method:"post",data:o,beforeSend:function(){c(n)},success:function(e){e.success?window.location.assign(e.data.url):alert(e.data.message),c(n,"hide")}})}))})),jQuery(document).ready((function(e){e(".bclink").on("click",(function(e){e.preventDefault();var t=jQuery(this).data("page");"builder"==t&&window.location.assign(wpadpcbu_public.builder),"search"==t&&location.reload()})),e("#filter-hide").on("click",(function(t){t.preventDefault(),e(this).hide(),e("#wpadpcbu-search-filter").hide(),e("#filter-show").show()})),e("#filter-show").on("click",(function(t){t.preventDefault(),e(this).hide(),e("#wpadpcbu-search-filter").show(),e("#filter-hide").show()})),e(".back-button").on("click",(function(e){e.preventDefault(),window.location.assign(wpadpcbu_public.builder)})),e(".filter-group .toggler").on("click",(function(t){t.preventDefault();var c=jQuery(this).data("group");e("#fgp-"+c).toggleClass("show")})),e("body").on("click",".wpadpcbu-actions .choose",(function(t){t.preventDefault();var n=jQuery(this).data("componentid"),o=jQuery(this).data("productid"),a="#component-product-"+o,p={action:"add_component_product",componentId:n,productId:o,_nonce:wpadpcbu_public.nonce};e.ajax(wpadpcbu_public.ajaxurl,{method:"post",data:p,beforeSend:function(){c(a)},success:function(e){e.success?window.location.href=wpadpcbu_public.builder:console.log(e),c(a,"hide")}})})),e("input[type='checkbox']").click((function(){clearTimeout(t);var e={action:"filter_component_product",pcbucomp:wpadpcbu_public.pcbucomp,taxFilters:n(),searchFilter:o(),sortByFilter:a(),priceStart:p(),priceEnd:u(),_nonce:wpadpcbu_public.nonce};t=setTimeout((function(){i(e)}),1e3)})),e("#input-sort").on("change",(function(c){c.preventDefault(),clearTimeout(t);var a=e(this).val(),r={action:"filter_component_product",pcbucomp:wpadpcbu_public.pcbucomp,taxFilters:n(),searchFilter:o(),sortByFilter:a,priceStart:p(),priceEnd:u(),_nonce:wpadpcbu_public.nonce};t=setTimeout((function(){i(r)}),1e3)})),e("#input-search").keyup((function(c){c.preventDefault(),clearTimeout(t);var o=e(this).val(),r={action:"filter_component_product",pcbucomp:wpadpcbu_public.pcbucomp,taxFilters:n(),searchFilter:o,sortByFilter:a(),priceStart:p(),priceEnd:u(),_nonce:wpadpcbu_public.nonce};t=setTimeout((function(){i(r)}),1e3)})),e(".pagination-button").on("click",(function(t){t.preventDefault();var c=jQuery(this).data("pagination"),r=e('input[name="current_page"]').val(),d=r;"next"==c&&(d=parseInt(r)+1),"prev"==c&&(d=parseInt(r)-1);var l={action:"filter_component_product",pcbucomp:wpadpcbu_public.pcbucomp,paged:d,taxFilters:n(),searchFilter:o(),sortByFilter:a(),priceStart:p(),priceEnd:u(),_nonce:wpadpcbu_public.nonce};i(l)}))})),jQuery(document).ready((function(e){e(".wpadpcbu-remove-savedpc").on("click",(function(t){t.preventDefault();var n={action:"remove_savedpc",pcId:e(this).data("id"),_nonce:wpadpcbu_public.nonce};e.ajax(wpadpcbu_public.ajaxurl,{method:"post",data:n,beforeSend:function(){c(".my_account_savedpcs")},success:function(e){e.success?location.reload():console.log(e),c(".my_account_savedpcs","hide")}})}))})),jQuery(document).ready((function(e){var t,c=e(".wpadpcbu-price-range"),n=e(".wpadpcbu-price-start"),o=e(".wpadpcbu-price-end"),a=8e4,i=0,r=0;function l(e){i=e.from,r=e.to,n.prop("value",i),o.prop("value",r),d(i,r)}c.ionRangeSlider({skin:"round",type:"double",min:0,max:a,from:0,to:8e4,onStart:l,onChange:l}),t=c.data("ionRangeSlider"),n.on("input",(function(){var c=e(this).prop("value");c<0?c=0:c>r&&(c=r),t.update({from:c}),""!=c&&d(c,u())})),o.on("input",(function(){var c=e(this).prop("value");c<i?c=i:c>a&&(c=a),t.update({to:c}),""!=c&&d(p(),c)}))}))})();