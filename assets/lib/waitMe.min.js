!function(e){e.fn.waitMe=function(t){return this.each((function(){function i(){var e=d.attr("data-waitme_id");d.removeClass("waitMe_container").removeAttr("data-waitme_id"),d.find('.waitMe[data-waitme_id="'+e+'"]').remove()}var o,a,r,s,n,c,d=e(this),l=!1,f="background-color",w="",u="",m={init:function(){function m(e){p.css({top:"auto",transform:"translateY("+e+"px) translateZ(0)"})}switch(n=e.extend({effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",waitTime:-1,textPos:"vertical",fontSize:"",source:"",onClose:function(){}},t),c=(new Date).getMilliseconds(),s=e('<div class="waitMe" data-waitme_id="'+c+'"></div>'),n.effect){case"none":r=0;break;case"bounce":r=3;break;case"rotateplane":r=1;break;case"stretch":r=5;break;case"orbit":r=2,l=!0;break;case"roundBounce":r=12;break;case"win8":case"win8_linear":r=5,l=!0;break;case"ios":r=12;break;case"facebook":r=3;break;case"rotation":r=1,f="border-color";break;case"timer":r=2;var b=e.isArray(n.color)?n.color[0]:n.color;w="border-color:"+b;break;case"pulse":r=1,f="border-color";break;case"progressBar":r=1;break;case"bouncePulse":r=3;break;case"img":r=1}if(""!==w&&(w+=";"),0<r){if("img"===n.effect)u='<img src="'+n.source+'">';else for(var h=1;h<=r;++h)e.isArray(n.color)?null==(b=n.color[h])&&(b="#000"):b=n.color,u=l?u+'<div class="waitMe_progress_elem'+h+'"><div style="'+f+":"+b+'"></div></div>':u+'<div class="waitMe_progress_elem'+h+'" style="'+f+":"+b+'"></div>';a=e('<div class="waitMe_progress '+n.effect+'" style="'+w+'">'+u+"</div>")}n.text&&(b=e.isArray(n.color)?n.color[0]:n.color,o=e('<div class="waitMe_text" style="color:'+b+";"+(""!=n.fontSize?"font-size:"+n.fontSize:"")+'">'+n.text+"</div>"));var g=d.find("> .waitMe");g&&g.remove(),(b=e('<div class="waitMe_content '+n.textPos+'"></div>')).append(a,o),s.append(b),"HTML"==d[0].tagName&&(d=e("body")),d.addClass("waitMe_container").attr("data-waitme_id",c).append(s),g=d.find("> .waitMe");var p=d.find(".waitMe_content");if(g.css({background:n.bg}),""!==n.maxSize&&"none"!=n.effect&&(b=a.outerHeight(),a.outerWidth(),"img"===n.effect?(a.css({height:n.maxSize+"px"}),a.find(">img").css({maxHeight:"100%"}),p.css({marginTop:-p.outerHeight()/2+"px"})):n.maxSize<b&&("stretch"==n.effect?(a.css({height:n.maxSize+"px",width:n.maxSize+"px"}),a.find("> div").css({margin:"0 5%"})):(b=n.maxSize/b-.2,h="-50%","roundBounce"==n.effect?(h="-75%",n.text&&(h="75%")):"win8"==n.effect||"timer"==n.effect||"orbit"==n.effect?(h="-20%",n.text&&(h="20%")):"ios"==n.effect&&(h="-15%",n.text&&(h="15%")),"rotation"==n.effect&&n.text&&(h="75%"),a.css({transform:"scale("+b+") translateX("+h+")",whiteSpace:"nowrap"})))),p.css({marginTop:-p.outerHeight()/2+"px"}),d.outerHeight()>e(window).height()){b=e(window).scrollTop();var v=p.outerHeight(),x=d.offset().top,y=d.outerHeight();0>(h=b-x+e(window).height()/2)&&(h=Math.abs(h)),0<=h-v&&h+v<=y?x-b>e(window).height()/2&&(h=v):h=b>x+y-v?b-x-v:b-x+v,m(h),e(document).scroll((function(){var t=e(window).scrollTop()-x+e(window).height()/2;0<=t-v&&t+v<=y&&m(t)}))}return 0<n.waitTime&&setTimeout((function(){i()}),n.waitTime),g.on("destroyed",(function(){n.onClose&&e.isFunction(n.onClose)&&n.onClose(d),g.trigger("close",{el:d})})),e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},g},hide:function(){i()}};return m[t]?m[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void 0:m.init.apply(this,arguments)}))},e(window).on("load",(function(){e("body.waitMe_body").addClass("hideMe"),setTimeout((function(){e("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove(),e("body.waitMe_body").removeClass("waitMe_body hideMe")}),200)}))}(jQuery);